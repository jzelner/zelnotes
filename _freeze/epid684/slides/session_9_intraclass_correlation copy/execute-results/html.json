{
  "hash": "8556cbf9efa35418d077ac9c11a053d2",
  "result": {
    "markdown": "---\npagetitle: \"Individual vs. Context vs. Space vs. Place\"\nformat: \n    revealjs:\n        theme: [solarized, styles.scss]\n        incremental: true\n        bibliography: \n          - \"/Users/jzelner/repos/bibtex-library/jz_library.bib\"\n          - \"../refs.bib\"\n---\n## {{< meta pagetitle >}}\n\n<div class=\"paddeddiv\">\n  <p style=\"font-size:0.5em; text-align: left;\">\n      EPID 684  \n      Spatial Epidemiology  \n      University of Michigan School of Public Health\n      <br><br>\n      Jon Zelner  \n      `jzelner@umich.edu`  \n      [`epibayes.io`](https://epibayes.io) \n    </p>\n</div>\n\n![](/images/epid_logo.png){.absolute bottom=0 right=50 width=\"400\" height=\"100\"}\n\n\n\n## Today's <span class=\"alert\">Theme</span> {.imgslide}\n\n<img src=\"/images/merlo_sim_data.png\">\n\nHow can we characterize the relative importance of <span class=\"alert\">individual</span> vs. <span class=\"alert\">contextual</span> drivers of variation?\n\n## Agenda\n\n- Walk through the intraclass correlation example from [@merlo2005]\n\n- Discuss what we learn from focusing on places vs. spaces as in [@chaix2005]\n\n\n## What is intraclass correlation?\n\n- A measure of <span class=\"alert\">global</span> clustering.\n\n- Measures the amount of the <span class=\"alert\">total variance</span> in an outcome that is clustered within vs. between <span class=\"alert\">groups</span>\n\n- Groups can include households, neighborhoods, cities, etc.\n\n- ICC is useful when there is individual-level and spatial variation but it is not clear which is <span class=\"alert\">most important</span>\n\n## What is variance?\n\n- <span class=\"alert\">Square</span> of the average deviation from the mean\n\n- So, if standard deviation: $\\sigma$ = 10$, Variance: $\\sigma^2$ = 100.\n\n## The total variance is the <span class=\"alert\">sum</span> of the within- and between-group variances\n\n$$\n\\sigma^2_{Total}=\\sigma^2_N+\\sigma^2_I\n$$\n\n- $\\sigma^2_N$ = \\alert{Between-neighborhood} variance in outcomes.\n\n- $\\sigma^2_I$ = Individual level variance in outcomes (\\alert{within-neighborhood} variation)\n\n## We can then use these to calculate the ICC\n\n$$\nICC=\\frac{\\sigma_{N}^2}{\\sigma_{N}^2+\\sigma_{I}^2}\n$$\n\nIn words: the ICC is the proportion of the total variation in the outcome that occurs *within* the units we care about.\n\n## A worked example\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nrequire(ggplot2)\n\nmu_pop <- 120\n\nsigma_pop <- 5\n\nsigma_neighborhood <- 3\n\nJ <- 10\nN <- 100\n\nneighborhoods <- rep(1:J, N)\n\nneighborhood_means <- rnorm(J, mu_pop, sqrt(sigma_neighborhood))\n\nind_sbp <- rnorm(N*J, neighborhood_means[neighborhoods], sqrt(sigma_pop))\n\nhg <- ggplot(data.frame(x=ind_sbp)) + geom_histogram(aes(x=x), binwidth=0.5, colour = \"black\", fill = \"white\") + theme_bw() + \ngeom_vline(xintercept = mean(ind_sbp), linetype = \"dashed\") +\nxlab(\"Systolic Blood Pressure (SBP)\") +\nylab(\"N\")\nplot(hg)\n```\n\n::: {.cell-output-display}\n![](session_9_intraclass_correlation-copy_files/figure-revealjs/unnamed-chunk-1-1.png){width=960}\n:::\n:::\n\n\n\n500 observations of blood pressure with $\\bar{x}$ = 120, $\\sigma^2$ = 8\n\n## Plotting by neighborhood shows that there is more than just <span class=\"alert\">individual</span> variation {.imgslide}\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\nsbp_limits <- c(min(ind_sbp)-3, max(ind_sbp)+3) \nig <- ggplot() +\ngeom_point(data = data.frame(x=as.factor(neighborhoods), y = ind_sbp), aes(x=x,y=y, colour = x)) + \nxlab(\"Neighborhood\") +\nylab(\"Individual SBP\") +\ntheme_bw() +\ntheme(legend.position = \"none\") +\nylim(sbp_limits)\nplot(ig)\n```\n\n::: {.cell-output-display}\n![](session_9_intraclass_correlation-copy_files/figure-revealjs/unnamed-chunk-2-1.png){width=960}\n:::\n:::\n\n\n\n## Use <span class=\"alert\">neighborhood means</span> to estimate between-neighborhood variance\n\n\n::: {.cell}\n\n```{.r .cell-code  code-fold=\"true\"}\n## Make a plot of neighborhood means, ordered from least to greatest\n\nig2 <- ggplot() +\ngeom_point(data = data.frame(x=as.factor(neighborhoods), y = ind_sbp), aes(x=x,y=y, colour = x)) + \ngeom_point(data = data.frame(x=as.factor(1:J), y = neighborhood_means), aes(x=x,y=y), shape = \"x\", size = 5) +\nxlab(\"Neighborhood\") +\nylab(\"Individual SBP\") +\ntheme_bw() +\ntheme(legend.position = \"none\") +\nylim(sbp_limits)\nplot(ig2)\n```\n\n::: {.cell-output-display}\n![](session_9_intraclass_correlation-copy_files/figure-revealjs/unnamed-chunk-3-1.png){width=960}\n:::\n:::\n\n\n## We can use this information to calculate the ICC\n\n- Total Variance = 8\n\n- Neighborhood Variance = 3\n\n- Individual Variance = Total - Neighborhood = 5\n\n- ICC = $\\frac{\\text{individual variance}}{\\text{total variance}}$ = .375\n\n## What does that mean?\n\n- About 38% of variation in SBP outcomes is attributable to neighborhood.\n\n- Seems like a lot, but importance is ultimately relative to the what biological and public health mechanisms are of interest.\n\n- Provides a <span class=\"alert\">basis for comparison</span> with other locations.\n\n## Preparing for <span class=\"alert\">What is the destination?</span> presentations\n\n- Why are we doing this?\n\n- How should you prepare?\n\n## Effective <span class=\"alert\">communication</span> of spatial questions and analyses is central to the goals of this course.\n\n- Identify well-posed spatial problems in public health and epidemiology.\n\n- Articulate concrete, informed, goals for spatially-focused public health interventions and research.\n\n- Suggest appropriate theoretical and analytic frameworks for understanding spatial variation in public health problems and interventions and policies meant to ameliorate them.\n\n## Since these are <span class=\"alert\">difficult</span> and <span class=\"alert\">complex</span> problems, good feedback is essential to getting your message across {.imgslide}\n\n<img src = \"/images/septa_trolley.png\">\n\nWhat does this trolley have to do with feedback? Let me tell you a story...\n\n## What does helpful feedback <span class=\"alert\">do</span>? {.imgslide}\n\n<img src= \"/images/feedback_loop_example.jpg\">\n\nGenerate insights that facilitate <span class=\"alert\">improvement</span> or <span class=\"alert\">growth</span> in the topic at hand\n\n## What makes for <span class=\"alert\">helpful</span> feedback?\n\n- Take the perspective of a peer or member of the intended audience who wants to learn about the topic, rather than a teacher/evaluator with an interest in finding <span class=\"alert\">flaws</span>.\n\n- Start by really trying to understand what your partner is <span class=\"alert\">trying to acheive</span>. \n\n- Be <span class=\"alert\">specific</span> in your feedback and keep it close to the paper you're reading.\n\n- Ask questions: If something doesn't make sense, explain what about it is confusing and ask what they were trying to accomplish. \n\n- Flag things you find interesting as well as those that are unclear. Knowing what is working is as or <span class=\"alert\">more</span> important than knowing what isn't.\n\n- Suggest resources or ideas that might help your partner advance their project.\n\n- [What else?](https://docs.google.com/document/d/13yQxaLqkOsn-SEzS0By8Fo59B_skG3HYYbsu6K4PRGY/edit?usp=sharing)\n\n## Next Time {.imgslide}\n\n<img src=\"/images/radon_entry.png\">\n\n[Radon as a window into multi-level modeling](https://publish.obsidian.md/epibayes/Courses/EPID684/modules/Module+4/2.+Digging+into+the+multi-level+approach+to+spatial+analysis)\n\n## References\n",
    "supporting": [
      "session_9_intraclass_correlation-copy_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}